{
  "rules": {
    "admins": {
      ".read": "false",  // Only a cloud function or admins can update this.
      ".write": "false",  // Only a cloud function or admins can update this.
      "$index": {
        "email": {
          ".validate": "newData.isString()"
        }
      }
    },
    // Public profile information.
    "login": {
      ".indexOn": ["_search_index/full_name", "_search_index/reversed_full_name", "uid"],
      "$uid": {
        ".read": "auth.uid === $uid || auth.token.admin === true",
        ".write": "auth.uid === $uid || auth.token.admin === true",
      },
      // Termo  de serviço settings
      "termo_servico": {
        "$uid": {
          ".write": "auth.uid === $uid || auth.token.admin === true",
          ".read": "auth.uid === $uid || auth.token.admin === true",
          "aprovado": {
            ".validate": "newData.isBoolean()"
          }
        }
      }
    },
    "settings" : {
      // estrutura básica da home
      "home": {
        ".read": "auth.uid !== null || auth.token.admin === true",
        ".write": "false"
      },    
      // segmentos de clientes
      "segmentos": {
        ".read": "auth.uid !== null || auth.token.admin === true",
        ".write": "false"
      },
      "primeiroLogin": {
        "listaEmailValido": {
          ".indexOn": "email",
          ".read": "auth.uid !== null || auth.token.admin === true",
          ".write": "false"
        },
        "listaCelularValido": {
          ".read": "auth.uid !== null || auth.token.admin === true",
          ".write": "false"
        }            
      }
    },
    // dados do usuário
    "usuarios": {
      ".read": "auth.token.admin === true",
      ".write": "false",
      "$chave": {
        ".read": "root.child('login/'+auth.uid+'/listaChaves/'+$chave).val() >= 0",
        ".write": "root.child('login/'+auth.uid+'/listaChaves/'+$chave).val() >= 0"
      }
    },
    // Disallow all other attributes.
    "$other": {
      ".validate": false
    }
  }
}
